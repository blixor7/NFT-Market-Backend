# Migration `20200519183206-rm-address-category-token`

This migration has been generated by Manthankumar Satani at 5/19/2020, 6:32:06 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."categories.address"

ALTER TABLE "public"."categories" DROP COLUMN "address",
DROP COLUMN "name",
ADD COLUMN "name" text  NOT NULL ;

ALTER TABLE "public"."erc20tokens" DROP COLUMN "address",
DROP COLUMN "name",
ADD COLUMN "name" text  NOT NULL ;

CREATE UNIQUE INDEX "categories.name" ON "public"."categories"("name")

CREATE UNIQUE INDEX "erc20tokens.name" ON "public"."erc20tokens"("name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200519172555-initial..20200519183206-rm-address-category-token
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model bids {
   active      Boolean? @default(true)
@@ -21,14 +21,13 @@
 }
 model categories {
   active            Boolean?            @default(true)
-  address           String              @unique
   created           DateTime            @default(now())
   description       String?
   id                Int                 @default(autoincrement()) @id
   img_url           String?
-  name              String?
+  name              String              @unique
   updated           DateTime            @default(now())
   url               String?
   categoryaddresses categoryaddresses[]
   tokens            tokens[]
@@ -57,14 +56,13 @@
 }
 model erc20tokens {
   active              Boolean?              @default(true)
-  address             String
   created             DateTime              @default(now())
   decimal             Int
   icon                String?
   id                  Int                   @default(autoincrement()) @id
-  name                String?
+  name                String                @unique
   symbol              String?
   updated             DateTime              @default(now())
   erc20tokenaddresses erc20tokenaddresses[]
   orders              orders[]
```


